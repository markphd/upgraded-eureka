!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.xstateUtils=e():t.xstateUtils=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,r){"use strict";function n(t){var e=t.states;return Object.keys(e).reduce(function(t,r){var a=e[r],i=n(e[r]);return t.push.apply(t,[a].concat(i)),t},[])}function a(t){return"string"==typeof t?[{target:t}]:Array.isArray(t)?t:Object.keys(t).map(function(e){return p({target:e},t[e])})}function i(t,e){if(void 0===e&&(e={}),t.parallel)return Object.keys(t.states).map(function(e){return i(t.states[e])}).reduce(function(t,e){return t.concat(e)},[]);var r=t.states;e[t.key]=!0;var n=Object.keys(r).reduce(function(t,n){if(e[n])return t;var a=r[n];return t.push.apply(t,i(a,e)),e[n]=!0,t},[]);if(!t.on)return n;var o=Object.keys(t.on).reduce(function(r,n){if(!t.on||!t.parent)return r;var o=t.parent,s=t.on[n];return s?(a(s).forEach(function(a){var s=a.target,u=a.cond,c=o.getState(s),f={event:n,source:t,target:c,cond:u};r.push(f),e[s]||(r.push.apply(r,i(c,e)),e[s]=!0)}),r):r},[]);return n.concat(o)}function o(t){function e(a){var i=JSON.stringify(a);if(!r[i]){r[i]={};for(var o=0,s=n;o<s.length;o++){var u=s[o],c=t.transition(a,u);r[i][u]={state:c.value},e(c.value)}}}var r={},n=t.events;return e(t.initialState.value),r}function s(t){function e(t){var n=JSON.stringify(t);i.add(n);for(var o=r[n],s=0,u=Object.keys(o);s<u.length;s++){var c=u[s],f=o[c].state;if(f){var p=JSON.stringify(v.toTrie(f));(!a[p]||a[p].length>a[n].length+1)&&(a[p]=(a[n]||[]).concat([{state:t,event:c}]))}}for(var l=0,y=Object.keys(o);l<y.length;l++){var h=y[l],f=o[h].state;if(f){var p=JSON.stringify(f);i.has(p)||e(f)}}return a}if(!t.states)return l;var r=o(t),n=JSON.stringify(t.initialState.value),a=(s={},s[n]=[],s),i=new Set;return e(t.initialState.value),a;var s}function u(t){var e=s(t);return Object.keys(e).map(function(t){return{state:JSON.parse(t),path:e[t]}})}function c(t){function e(t,o){if(n.add(t),t===o)i[o]=i[o]||[],i[o].push(a.slice());else for(var s=0,u=Object.keys(r[t]);s<u.length;s++){var c=u[s],f=r[t][c].state;if(f){var p=JSON.stringify(f);n.has(p)||(a.push({state:JSON.parse(t),event:c}),e(p,o))}}a.pop(),n.delete(t)}if(!t.states)return l;var r=o(t),n=new Set,a=[],i={},s=JSON.stringify(t.initialState.value);return Object.keys(r).forEach(function(t){e(s,t)}),i}function f(t){var e=c(t);return Object.keys(e).map(function(t){return{state:JSON.parse(t),paths:e[t]}})}var p=this&&this.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t};Object.defineProperty(e,"__esModule",{value:!0});var v=r(1),l={};e.getNodes=n,e.getEdges=i,e.getAdjacencyMap=o,e.getShortestPaths=s,e.getShortestPathsAsArray=u,e.getSimplePaths=c,e.getSimplePathsAsArray=f},function(t,e,r){"use strict";function n(t){try{return"string"==typeof t||"number"==typeof t?""+t:t.type}catch(t){throw new Error("Events must be strings or objects with a string event.type property.")}}function a(t){try{return Array.isArray(t)?t:t.toString().split(".")}catch(e){throw new Error("'"+t+"' is not a valid state path.")}}function i(t){if(t instanceof s.State)return t.value;if("object"==typeof t&&!(t instanceof s.State))return t;var e=a(t);if(1===e.length)return e[0];for(var r={},n=r,i=0;i<e.length-1;i++)i===e.length-2?n[e[i]]=e[i+1]:(n[e[i]]={},n=n[e[i]]);return r}function o(t,e){var r={};return Object.keys(t).forEach(function(n){r[n]=e(t[n],n,t)}),r}Object.defineProperty(e,"__esModule",{value:!0});var s=r(3);e.getEventType=n,e.toStatePath=a,e.toTrie=i,e.mapValues=o},function(t,e,r){r(0),t.exports=r(0)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4),a=r(1),i=function(){function t(t,e,r,a,i){void 0===r&&(r=[]),void 0===a&&(a=n.EMPTY_ACTIVITY_MAP),void 0===i&&(i={}),this.value=t,this.history=e,this.actions=r,this.activities=a,this.data=i}return t.from=function(e){return e instanceof t?e:new t(a.toTrie(e))},t.inert=function(e){return e instanceof t?e.actions.length?new t(e.value,e.history,[]):e:t.from(e)},t.prototype.toString=function(){if("string"==typeof this.value)return this.value;for(var t=[],e=this.value;;){if("string"==typeof e){t.push(e);break}var r=Object.keys(e),a=r[0];if(r.slice(1).length)return;t.push(a),e=e[a]}return t.join(n.STATE_DELIMITER)},t}();e.State=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.STATE_DELIMITER=".",e.EMPTY_ACTIVITY_MAP={}}])});